

## CF908D. New Year and Arbitrary Arrangement

[link](https://codeforces.com/problemset/problem/908/D)

初始想法是 DP 状态记录 $\texttt{ab}$ 对儿数和 $\texttt{a}$ 数量，记为 $f(i,j)$，但是可能存在 $\texttt{ab}$ 对儿数 $<k$ 但是末尾有大量 $\texttt{a}$ 的状态，这样复杂度是爆炸的。

观察性质，状态 $f(i,j)$ 如果 $i<k$ 但是 $i+j\ge k$，那么再放一个 $\texttt{b}$ 就会满足。那么只要算下一次出现 $\texttt{b}$ 的期望步数，此时 $f(i,j)=i+j+\frac{1}{P_b}-1$。

写记忆化搜索会很方便。

[submission(0)](https://codeforces.com/contest/908/submission/130460112)



