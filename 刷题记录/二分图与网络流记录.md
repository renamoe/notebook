to do:

[网络流/二分图相关笔记(应用篇)](https://www.luogu.com.cn/blog/command-block/wang-lao-liu-xiang-guan-bi-ji)

---

## UOJ#171. 【WC2016】挑战NPC

[link](https://uoj.ac/problem/171)

一个精妙的构造。

每个筐拆成三个点代表三个空位；每个球向所有能到达的空位连边；让每个筐的三个空位两两连边；求最大匹配。

这样一个“半空”的筐会多产生一个匹配，答案就是最大匹配数减去 $n$。

因为有奇环所以是一般图最大匹配。

注意为了输出方案，每个球一定要匹配上，所以带花树一开始要优先从球开始匹配。

[submission(1)](https://uoj.ac/submission/520156)

## LOJ#2674. 「NOI2012」美食节

[link](https://loj.ac/p/2674)

将时间前缀和的代价拆为每道菜的贡献，即一个厨师 $i$ 倒数第 $k$ 道菜是 $j$，那么代价为 $k\times t_{i,j}$。

那么可以将厨师拆点代表能够做的每一道菜，就是带权匹配的问题了。

点数 $\mathcal O(n+mp)$，边数 $\mathcal O(nmp)$，直接跑费用流过不去。

发现有用的点、边很少，每个厨师用到的拆点也是一个前缀。考虑动态开点，Dinic 每增广一次，将所有用满的厨师新建一个点。点数 $\mathcal O(n+m+p)$，边数 $\mathcal O(n(m+p))$。

[submission(1)](https://loj.ac/s/1321761)

